{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Guest-friendly Settings edits and seeded expanded Services catalog (including payment gateway offerings)",
  "requirements": [
    {
      "id": "REQ-73",
      "summary": "Make Settings editable for guests and persist profile updates without authorization traps",
      "acceptanceCriteria": [
        "Opening the Settings page as a guest does not trap or show an authorization error.",
        "Guest users can edit at least: Name, Email, Mobile Number, Agency, Monthly Goal, Subscription Plan, and save successfully.",
        "After saving, reloading the app shows the saved Settings values for the same caller principal (including the anonymous principal).",
        "Backend methods used by Settings (get/save profile) do not Runtime.trap for guest callers in the current public/no-sign-in mode."
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/SettingsPage.tsx",
          "operation": "modify",
          "description": "Convert Settings from read-only display into an editable form that works for guest callers: use the existing authorization-related profile/role fetching (from the authorization component’s frontend integration) to detect guest state, allow editing Name/Email/Mobile Number/Agency/Monthly Goal/Subscription Plan, and save via the existing profile save hook with English success/error messaging. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/hooks/useCurrentUserProfile.ts",
          "operation": "modify",
          "description": "Harden profile save/query behavior for public/no-sign-in mode: ensure guest callers can attempt save without UI crashes, normalize/ensure required UserProfile fields are populated with safe defaults when the UI supplies partial data, and keep React Query invalidation/refetch behavior so reload shows persisted values. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/hooks/useAuthRole.ts",
          "operation": "modify",
          "description": "Ensure role detection remains guest-friendly (no traps surfaced to UI) and expose a consistent guest fallback that Settings can use to avoid authorization-gated UX. Verify the component's usage instructions before implementing."
        }
      ]
    },
    {
      "id": "REQ-74",
      "summary": "Remove guest UI restrictions so guests can add and edit services from the Services page",
      "acceptanceCriteria": [
        "As a guest, clicking “Add Service” on the Services page opens the service dialog and allows submitting a new service without being blocked by a “You must have a profile to manage services” error.",
        "The Services list refreshes after a successful guest-created service and shows the new entry.",
        "All user-facing text related to guest service management is in English."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/services/ServiceDialog.tsx",
          "operation": "modify",
          "description": "Remove the guest-blocking check that requires a profile/agency to manage services; allow guests to submit services by collecting any needed fields in the dialog (e.g., allow entering Agency when no profile is present, or use a safe default), and keep all messaging in English. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/pages/ServicesPage.tsx",
          "operation": "modify",
          "description": "Ensure guest flows are unblocked: keep “Add Service” enabled for guests, ensure dialog open/close works, and rely on existing React Query invalidation so the list refreshes after a successful create/edit. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/hooks/useServices.ts",
          "operation": "modify",
          "description": "Improve guest error handling and consistency: ensure add/update mutations surface clean English errors to the UI and always invalidate the Services query on success so newly created guest services appear immediately. Verify the component's usage instructions before implementing."
        }
      ]
    },
    {
      "id": "REQ-76",
      "summary": "Seed the expanded services catalog into Services records grouped by the specified serviceType categories",
      "acceptanceCriteria": [
        "All listed items exist as individual Service records and are visible in the Services management list.",
        "Each created Service uses the correct serviceType category (exact English category names as specified).",
        "The two payment-gateway items are present as Service records: “International Payment Gateway Setup (Stripe, PayPal)” and “Indian Payment Gateway Integration (Razorpay, UPI)”.",
        "No external payment gateway integration is added; these are catalog/service offering entries only."
      ],
      "file_operations": [
        {
          "path": "frontend/src/utils/services/seedCatalog.ts",
          "operation": "create",
          "description": "Add a catalog seeding utility that defines the exact list of service names and maps them into Service objects using the exact serviceType categories: “Website & Funnel Services”, “AI & Automation Services”, “Marketing & Growth Systems”, “High-Ticket Business Solutions”, and “Bonus High-Value Add-ons (Optional Upsells)”; include the two payment-gateway offerings as plain catalog entries only (no payment integration logic). Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/pages/ServicesPage.tsx",
          "operation": "modify",
          "description": "Wire the seeding flow into the Services page: on first load (or when services are missing catalog entries), offer an English UI action (or a safe one-time auto-seed) that uses existing service creation capabilities to insert all catalog items, prevents duplicate seeding (e.g., local flag + name existence checks), and refreshes the list after completion. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/hooks/useServices.ts",
          "operation": "modify",
          "description": "Add support for batch catalog insertion from the seeding utility (e.g., helper mutation that sequentially calls addService and invalidates once), ensuring the Services list reflects seeded entries after completion. Verify the component's usage instructions before implementing."
        }
      ]
    }
  ]
}